rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Helper function to check for admin role.
    // Replace 'YOUR_ADMIN_UID_HERE' with your actual Firebase Admin UID
    // after you set up authentication for the backoffice.
    function isAdmin() {
      // For now, we will allow writes to bootstrap data,
      // but this should be locked down.
      // return request.auth.uid == 'YOUR_ADMIN_UID_HERE';
      return true; // DANGEROUS: Temporarily open for bootstrapping
    }

    // Projects are public to read, but only admin can write.
    match /projects/{projectId} {
      allow get, list: if true;
      allow write: if isAdmin();
    }

    // Profile is public to read, but only admin can write.
    // It's intended to be a single document collection.
    match /profile/{profileId} {
      allow get, list: if true;
      allow write: if isAdmin();
    }

    // Social links are public to read, but only admin can write.
    match /social_links/{socialLinkId} {
      allow get, list: if true;
      allow write: if isAdmin();
    }
    
    // Articles are public to read, but only admin can write.
    match /articles/{articleId} {
      allow get, list: if true;
      allow write: if isAdmin();
    }
  }
}
